[tox]
skipsdist = True
envlist = py37,py38

[testenv]
whitelist_externals =
    poetry
    sed
skip_install = true
commands =
    poetry install -v
    poetry run pytest {posargs} tests/
    # https://github.com/pytest-dev/pytest-cov/issues/175
    sed -i s%'name="."'%'name="aiographql"'%g coverage/coverage.xml
    sed -i s%'filename="'%'filename="aiographql/'%g coverage/coverage.xml
